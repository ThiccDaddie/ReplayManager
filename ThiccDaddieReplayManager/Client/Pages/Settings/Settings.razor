@page "/settings"

@using ThiccDaddie.ReplayManager.Shared
@using Newtonsoft.Json

@inject HttpClient Http

@namespace ThiccDaddie.ReplayManager.Client.Pages

<MatTextField @bind-Value="@PrimaryReplaysDirectory" OnFocusOut="@ChangePrimaryReplaysDirectory" Label="Standard"></MatTextField>

@code { public string PrimaryReplaysDirectory { get; set; }

	protected override async Task OnInitializedAsync()
	{
		var response = await Http.GetAsync("Settings/PrimaryReplaysDirectory");
		PrimaryReplaysDirectory = await response.EnsureSuccessStatusCode().Content.ReadAsStringAsync();
	}

	void ChangePrimaryReplaysDirectory(FocusEventArgs e)
	{
		Http.PostAsync("Settings/PrimaryReplaysDirectory", new StringContent(JsonConvert.SerializeObject(PrimaryReplaysDirectory), System.Text.Encoding.UTF8, "application/json"));
	} }
